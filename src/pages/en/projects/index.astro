---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects-en')).sort((a, b) => {
  if (a.data.featured !== b.data.featured) {
    return a.data.featured ? -1 : 1;
  }
  return a.data.title.localeCompare(b.data.title, 'en');
});
---

<BaseLayout
  title="Projects | Mikael Johansson"
  description="Selected work across SEO, web engineering, and automation."
  lang="en"
>
  <section class="band band--surface" aria-labelledby="projects-title">
    <h1 id="projects-title" class="text-3xl font-semibold tracking-tight text-white md:text-4xl">Projects</h1>
    <p class="mt-4 max-w-3xl text-neutral-300">
      This selection highlights projects where product thinking, technical execution, and operational reliability were built together.
    </p>

    <div class="mt-10 grid grid-cols-1 gap-5 md:grid-cols-2 lg:grid-cols-3">
      {projects.map((project) => (
        <article class="ui-card ui-card--interactive flex h-full flex-col p-6" tabindex="0">
          <div class="flex flex-wrap items-center gap-2">
            {project.data.featured && (
              <span class="rounded-full border border-cyan-300/40 bg-cyan-300/15 px-2.5 py-1 text-xs font-semibold text-cyan-100">
                Featured
              </span>
            )}
            {project.data.tags.map((tag) => (
              <span class="rounded-full border border-white/15 bg-white/5 px-2.5 py-1 text-xs text-neutral-200">{tag}</span>
            ))}
          </div>

          <h2 class="mt-4 text-xl font-semibold text-white">{project.data.title}</h2>
          <p class="mt-3 text-sm leading-relaxed text-neutral-300">{project.data.excerpt}</p>

          <p class="mt-4 text-xs uppercase tracking-[0.14em] text-neutral-400">{project.data.role}</p>

          <a href={`/en/projects/${project.slug}`} class="mt-6 inline-flex text-sm font-semibold text-cyan-300 transition hover:text-cyan-200">
            Read project
          </a>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
