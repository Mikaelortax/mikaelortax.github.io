---
import { getCollection, render } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ProjectDetail from '../../../components/projects/ProjectDetail.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects-en');

  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await render(project);
---

<BaseLayout title={`${project.data.title} | Project`} description={project.data.excerpt} lang="en">
  <ProjectDetail
    lang="en"
    title={project.data.title}
    excerpt={project.data.excerpt}
    role={project.data.role}
    stack={project.data.stack}
    tags={project.data.tags}
    outcomes={project.data.outcomes}
    liveUrl={project.data.liveUrl}
    repoUrl={project.data.repoUrl}
    caseImage={project.data.caseImage}
    backHref="/en/projects"
    backLabel="<- Back to projects"
    contactHref="/en/contact"
    contactLabel="Contact me"
    ctaTitle="Want to build a similar system?"
    ctaText="Share your current setup and I will reply with a practical plan and clear next steps."
  >
    <Content />
  </ProjectDetail>
</BaseLayout>
