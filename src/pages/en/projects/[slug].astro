---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects-en', ({ data }) => !data.draft);

  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await render(project);
---

<BaseLayout title={`${project.data.title} | Project`} description={project.data.excerpt} lang="en">
  <article class="band band--surface" aria-labelledby="project-title">
    <a href="/en/projects" class="inline-flex text-sm font-semibold text-cyan-300 transition hover:text-cyan-200"><- Back to projects</a>

    <header class="mt-5">
      <h1 id="project-title" class="text-3xl font-semibold tracking-tight text-white md:text-4xl">{project.data.title}</h1>
      <p class="mt-4 max-w-3xl text-neutral-300">{project.data.excerpt}</p>

      <div class="mt-6 grid gap-4 text-sm text-neutral-200 md:grid-cols-3">
        <div class="ui-card p-4">
          <p class="text-xs uppercase tracking-[0.16em] text-cyan-300">Role</p>
          <p class="mt-2">{project.data.role}</p>
        </div>
        <div class="ui-card p-4">
          <p class="text-xs uppercase tracking-[0.16em] text-cyan-300">Stack</p>
          <p class="mt-2">{project.data.stack.join(' · ')}</p>
        </div>
        <div class="ui-card p-4">
          <p class="text-xs uppercase tracking-[0.16em] text-cyan-300">Date</p>
          <p class="mt-2">{project.data.date ?? 'Ongoing'}</p>
        </div>
      </div>

      <ul class="mt-6 grid gap-2 text-sm text-neutral-200 md:grid-cols-2" aria-label="Outcomes">
        {project.data.outcomes.map((item) => (
          <li class="ui-card p-4">{item}</li>
        ))}
      </ul>
    </header>

    <div class="prose prose-invert mt-10 max-w-none prose-headings:text-white prose-p:text-neutral-300 prose-strong:text-white">
      <Content />
    </div>
  </article>
</BaseLayout>
