---
import { getLocale, localizePath } from '../lib/i18n';

interface Props {
  className?: string;
}

const { className = '' } = Astro.props;
const pathname = Astro.url.pathname;
const currentLocale = getLocale(pathname);
const svHref = localizePath(pathname, 'sv');
const enHref = localizePath(pathname, 'en');

const baseClasses =
  'inline-flex min-w-10 items-center justify-center rounded-full border px-3 py-1 text-xs font-semibold tracking-[0.2em] transition';

const activeClasses =
  'border-cyan-300 bg-cyan-300/20 text-cyan-100 shadow-[0_0_14px_rgba(34,211,238,0.35)]';

const inactiveClasses =
  'border-cyan-500/30 bg-slate-950/40 text-cyan-300 hover:border-cyan-300/70 hover:text-cyan-100';
---

<nav class={`inline-flex items-center gap-2 rounded-full border border-cyan-500/30 bg-slate-950/60 p-1 ${className}`.trim()} aria-label="Language switcher">
  <a
    href={svHref}
    class={`${baseClasses} ${currentLocale === 'sv' ? activeClasses : inactiveClasses}`}
    aria-label="Switch language to Swedish"
    aria-current={currentLocale === 'sv' ? 'page' : undefined}
  >
    SV
  </a>
  <a
    href={enHref}
    class={`${baseClasses} ${currentLocale === 'en' ? activeClasses : inactiveClasses}`}
    aria-label="Switch language to English"
    aria-current={currentLocale === 'en' ? 'page' : undefined}
  >
    EN
  </a>
</nav>
