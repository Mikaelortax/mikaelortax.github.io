---
import '../styles/global.css';
import { localizePath } from '../lib/i18n';
import Header from '../components/Header.astro';

interface Props {
  title: string;
  lang?: 'sv' | 'en';
}

const { title, lang = 'en' } = Astro.props;
const site = Astro.site ?? new URL(Astro.url.origin);
const pathname = Astro.url.pathname || '/';
const canonicalPath = pathname === '' ? '/' : pathname;
const svPath = localizePath(pathname, 'sv');
const enPath = localizePath(pathname, 'en');
const xDefaultPath = '/';

const canonicalUrl = new URL(canonicalPath, site).toString();
const svHref = new URL(svPath, site).toString();
const enHref = new URL(enPath, site).toString();
const xDefaultHref = new URL(xDefaultPath, site).toString();
---

<!DOCTYPE html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="canonical" href={canonicalUrl} />
    <link rel="alternate" hreflang="sv" href={svHref} />
    <link rel="alternate" hreflang="en" href={enHref} />
    <link rel="alternate" hreflang="x-default" href={xDefaultHref} />
  </head>
  <body class="bg-neutral-950 text-white">
    <Header lang={lang} path={pathname} />
    <main class="mx-auto max-w-5xl px-6 py-10">
      <slot />
    </main>
    <footer class="border-t border-neutral-800 py-6 text-center text-sm text-neutral-400">
      Mikael Johansson
    </footer>
  </body>
</html>
